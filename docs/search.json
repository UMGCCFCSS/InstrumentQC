[
  {
    "objectID": "Miscellaneous.html",
    "href": "Miscellaneous.html",
    "title": "UMGCC FCSS",
    "section": "",
    "text": "Instrument Temperature\n\n\n\n\n\n\n\n\nMorning QC Time\n\n\n\n\n\n\n\n\nPeak Use Hours\n\n3L\n\n\n\n\n\n\n\n\n4L\n\n\n\n\n\n\n\n\n5L"
  },
  {
    "objectID": "Examples_staff.html",
    "href": "Examples_staff.html",
    "title": "UMGCC FCSS",
    "section": "",
    "text": "To manually send the QC data to the server, please click the green play button below to run the chunk of code. If you see that the success message appears in the console below, you have done so successfully.\n\n#3L\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nsetwd(Main)\nTheScript &lt;- file.path(Main, \"TheScript_3L.R\")\nsource(TheScript)\n\nToday &lt;- Sys.time()\nToday &lt;- as.Date(Today)\n\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nFlag = data.frame(Flag=Today, Status=\"Success\")\nTheFlag &lt;- file.path(Main, \"Flag.csv\")\nwrite.csv(Flag, TheFlag, row.names=FALSE)\n#file.remove(TheFlag)\n\n\n#4L\n\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nsetwd(Main)\nTheScript &lt;- file.path(Main, \"TheScript_4L.R\")\nsource(TheScript)\n\nToday &lt;- Sys.time()\nToday &lt;- as.Date(Today)\n\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nFlag = data.frame(Flag=Today, Status=\"Success\")\nTheFlag &lt;- file.path(Main, \"Flag.csv\")\nwrite.csv(Flag, TheFlag, row.names=FALSE)\n#file.remove(TheFlag)\n\n\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora\", \"Documents\", \"InstrumentQC\")\nsetwd(Main)\nTheScript &lt;- file.path(Main, \"TheScript_5L.R\")\nsource(TheScript)\n\nToday &lt;- Sys.time()\nToday &lt;- as.Date(Today)\n\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora\", \"Documents\", \"InstrumentQC\")\nFlag = data.frame(Flag=Today, Status=\"Success\")\nTheFlag &lt;- file.path(Main, \"Flag.csv\")\nwrite.csv(Flag, TheFlag, row.names=FALSE)\n#file.remove(TheFlag)\n\nmessage(\"Data Successfully processed\")\n\n\n#CS\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\", \"Documents\", \"InstrumentQC\")\nsetwd(Main)\nTheScript &lt;- file.path(Main, \"TheScript_CS.R\")\nsource(TheScript)\n\nToday &lt;- Sys.time()\nToday &lt;- as.Date(Today)\n\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\", \"Documents\", \"InstrumentQC\")\nFlag = data.frame(Flag=Today, Status=\"Success\")\nTheFlag &lt;- file.path(Main, \"Flag.csv\")\nwrite.csv(Flag, TheFlag, row.names=FALSE)\n\nmessage(\"Data successfully sent!\")\n#file.remove(TheFlag)\n\n\n# /home/david/Documents/InstrumentQC\nMain &lt;- file.path(\"/home\", \"david\", \"Documents\", \"InstrumentQC\")\nsetwd(Main)\nTheScript &lt;- file.path(Main, \"TheScript.R\")\nsource(TheScript)\n\nToday &lt;- Sys.time()\nToday &lt;- as.Date(Today)\n\n#Main &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\", \"Documents\", \"InstrumentQC\")\n#Flag = data.frame(Flag=Today, Status=\"Success\")\n#TheFlag &lt;- file.path(Main, \"Flag.csv\")\n#write.csv(Flag, TheFlag, row.names=FALSE)\n#message(\"Data successfully sent!\")\n#file.remove(TheFlag)"
  },
  {
    "objectID": "help.html",
    "href": "help.html",
    "title": "Measurement Types",
    "section": "",
    "text": "During Daily QC, the spectral cytometers use QC beads to adjust the gains for individual detectors to ensure that .fcs files acquired on different days are comparable across time. To monitor these adjustments, we visualize the Median Fluorescent Intensity (MFI) values of the QC bead .fcs files that are acquired before and after running daily QC. What we normally observe resembles the following plot:\n\n\n\n\n\nIn this plot, you can notice when the instrument switched from using the Cytek QC Bead Lot 2005 to Cytek QC Bead Lot 2006. This new QC bead lot has a new setpoint MFI for each detector that the instrument accounts for. (For additional examples see the visualized differences across lots.)\nOn some of our instruments and detectors, we have observed there is significant drift from the setpoint of samples acquired before Daily QC has been run, which is why we encourage weekend users to run Daily QC when starting up the instrument.\n\n\n\n\n\n\n\n\nGain (similar to voltage on certain cytometers) is an unit which detected signal is amplified by for each detector. An instrument applies different gains to each detector, allowing for use of dim and bright fluorophores. During the Daily QC, these gains normally get minor adjustments to ensure the MFI of the QC beads stays constant, allowing for comparison of .fcs files acquired on different days. As the individual lasers in the cytometer are used, they slowly wear down and more gain is applied to remain at that MFI setpoint. This contributes to the slowly increasing view typical of the gain plots:\n\n\n\n\n\nGenerally, when a laser is begining to rapidly wear out, we see steeper increases in the Gain plots. When the field service engineer replaces the laser, the gain values are reset according to the new laser. In this example, you can see that pattern for the violet laser of the instrument was replaced twice (red lines indicating field service engineer visit):\n\n\n\n\n\nFor the Cytek instruments, a Daily QC fail is triggered when the Gain is &gt;100% of the original baseline Gain value. When this happens, a red flag is added to that timepoint. We have observed that .fcs files acquired on gain spike days (as seen below) may still have altered unmixing even if they have not exceeded the &gt;100% threshold, so it’s worth keeping an eye on.\n\n\n\n\n\n\n\n\nThe robust coefficient of variation (rCV) is a measure of the resolution between the positive and negative population for each detector. When the value is high, dim staining populations may be harder to distinguish from the negative population. For spectral instruments where entire spectrum is used to identify a fluorophore, increased rCV on the detector where a fluorophore has its main peak has impacted unmixing for users with larger panels (&gt;20 fluorophores). The RCV plots will typically resemble the following:\n\n\n\n\n\nFor Cytek instruments, a Daily QC fail is only triggered when %rCV exceeds either 8% for SSC, or 6% for FSC and the following detectors: UV3, V3, B3, YG3, R3. When this happens, the instrument will appear as failed on the home page:\n\n\n\n\n\nWhen we navigate to the History tab and find that date, we can see that the rCV for UV3 failed, which was what triggered the QC fail:\n\n\n\n\n\nBut what happens if the RCV fails on any of the other detectors (UV1-&gt; UV2, UV4 -&gt; UV16,etc.)? Since they are not the indicator detectors, they won’t trigger a Cytek QC fail. However, since we have observed unmixing issues when the RCVs of these other detectors are exceeded, we don’t want to ignore them. Consequently, when a non-indicator RCV fails, we show it as failed under the Daily View:\n\n\n\n\n\nAnd label the instrument as caution for that given day:\n\n\n\n\n\nHow to interpret these Caution notices depends on what we see in the Levey-Jennings plots. For a few detectors (especially UV1/UV2), they exceed the 6% cutoff but are stable over time. Consequently, the impact of the increased RCV is relatively minimal.\n\n\n\n\n\nBy contrast, is the RCV went from consistently stable, to spiking, the impact on your unmixing is likely to be significantly greater."
  },
  {
    "objectID": "help.html#mfi",
    "href": "help.html#mfi",
    "title": "Measurement Types",
    "section": "",
    "text": "During Daily QC, the spectral cytometers use QC beads to adjust the gains for individual detectors to ensure that .fcs files acquired on different days are comparable across time. To monitor these adjustments, we visualize the Median Fluorescent Intensity (MFI) values of the QC bead .fcs files that are acquired before and after running daily QC. What we normally observe resembles the following plot:\n\n\n\n\n\nIn this plot, you can notice when the instrument switched from using the Cytek QC Bead Lot 2005 to Cytek QC Bead Lot 2006. This new QC bead lot has a new setpoint MFI for each detector that the instrument accounts for. (For additional examples see the visualized differences across lots.)\nOn some of our instruments and detectors, we have observed there is significant drift from the setpoint of samples acquired before Daily QC has been run, which is why we encourage weekend users to run Daily QC when starting up the instrument."
  },
  {
    "objectID": "help.html#gain",
    "href": "help.html#gain",
    "title": "Measurement Types",
    "section": "",
    "text": "Gain (similar to voltage on certain cytometers) is an unit which detected signal is amplified by for each detector. An instrument applies different gains to each detector, allowing for use of dim and bright fluorophores. During the Daily QC, these gains normally get minor adjustments to ensure the MFI of the QC beads stays constant, allowing for comparison of .fcs files acquired on different days. As the individual lasers in the cytometer are used, they slowly wear down and more gain is applied to remain at that MFI setpoint. This contributes to the slowly increasing view typical of the gain plots:\n\n\n\n\n\nGenerally, when a laser is begining to rapidly wear out, we see steeper increases in the Gain plots. When the field service engineer replaces the laser, the gain values are reset according to the new laser. In this example, you can see that pattern for the violet laser of the instrument was replaced twice (red lines indicating field service engineer visit):\n\n\n\n\n\nFor the Cytek instruments, a Daily QC fail is triggered when the Gain is &gt;100% of the original baseline Gain value. When this happens, a red flag is added to that timepoint. We have observed that .fcs files acquired on gain spike days (as seen below) may still have altered unmixing even if they have not exceeded the &gt;100% threshold, so it’s worth keeping an eye on."
  },
  {
    "objectID": "help.html#rcv",
    "href": "help.html#rcv",
    "title": "Measurement Types",
    "section": "",
    "text": "The robust coefficient of variation (rCV) is a measure of the resolution between the positive and negative population for each detector. When the value is high, dim staining populations may be harder to distinguish from the negative population. For spectral instruments where entire spectrum is used to identify a fluorophore, increased rCV on the detector where a fluorophore has its main peak has impacted unmixing for users with larger panels (&gt;20 fluorophores). The RCV plots will typically resemble the following:\n\n\n\n\n\nFor Cytek instruments, a Daily QC fail is only triggered when %rCV exceeds either 8% for SSC, or 6% for FSC and the following detectors: UV3, V3, B3, YG3, R3. When this happens, the instrument will appear as failed on the home page:\n\n\n\n\n\nWhen we navigate to the History tab and find that date, we can see that the rCV for UV3 failed, which was what triggered the QC fail:\n\n\n\n\n\nBut what happens if the RCV fails on any of the other detectors (UV1-&gt; UV2, UV4 -&gt; UV16,etc.)? Since they are not the indicator detectors, they won’t trigger a Cytek QC fail. However, since we have observed unmixing issues when the RCVs of these other detectors are exceeded, we don’t want to ignore them. Consequently, when a non-indicator RCV fails, we show it as failed under the Daily View:\n\n\n\n\n\nAnd label the instrument as caution for that given day:\n\n\n\n\n\nHow to interpret these Caution notices depends on what we see in the Levey-Jennings plots. For a few detectors (especially UV1/UV2), they exceed the 6% cutoff but are stable over time. Consequently, the impact of the increased RCV is relatively minimal.\n\n\n\n\n\nBy contrast, is the RCV went from consistently stable, to spiking, the impact on your unmixing is likely to be significantly greater."
  },
  {
    "objectID": "BleachVsLot2006Beads.html",
    "href": "BleachVsLot2006Beads.html",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "",
    "text": "Based on testing on our four Cytek Aurora instruments at the UMGCC Flow Core, it appears that the SpectroFlo QC Bead Lot 2006 is highly bleach sensitive. Bleach is normally used as part of both the fluidics shutdown and long clean procedures.\nIf Daily QC is acquired shortly after running bleach and the normal recommended ammount of flushing with DI water, the QC will fail due to increased gains on the last detectors. Additionally, the %RCV of the last detectors will jump from baseline to around 10%. An example of this spike in gain and %RCV can be seen below for UV16:\n\n\n\nUV16\n\n\n\n\n\nUV16\n\n\nIf we increase the amount of time running DI water, the gain won’t fail (consequently Daily QC will show as having passed) but the increased %RCV will still be present. When we have tested, the increased %RCV declines slowly with the more time DI water is flushed through the system.\nWhile Daily QC is shown to have passed, our users running large spectral panels (&gt;30 colors) reported having really bad unmixing errors in their panels on days when the bleaching occurred, primarily for fluorophores whose primary peak is on the last detectors of a given laser.\nWe set out to try to better understand what was happening to the Lot 2006 QC bead lot when it was exposed to bleach."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#methods",
    "href": "BleachVsLot2006Beads.html#methods",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Methods",
    "text": "Methods\nOn the Cytek Aurora 5-laser we first acquired 5000 Lot 2006 QC beads on low (28 After Evening sample). We then ran one minute of bleach on high via the sip. The amount of bleach in the tube only came in contact with the bottom two centimeters of the needle. Following this, we ran DI water on high for two minutes before acquiring an additional 5000 beads (28 Evening Post Bleach SIP sample). Following this, we ran DI water for another 5 minutes, before acquiring freshly prepared beads (28 Evening Post DI water).\n\n\nCode\nlibrary(flowCore)\nlibrary(flowWorkspace)\nlibrary(openCyto)\nlibrary(Luciernaga)\nlibrary(flowSpectrum)\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(ggplot2)\n\npath &lt;- file.path(\"/media\", \"david\", \"David\")\nfiles &lt;- list.files(path, pattern=\".fcs\", full.names=TRUE, recursive=FALSE)\n#files &lt;- files[str_detect(files, \"12 \")]\n\nMyCytoSet &lt;- load_cytoset_from_fcs(files, transformation=FALSE, truncate_max_range = FALSE)\nMyGatingSet &lt;- GatingSet(MyCytoSet)\nMyGates &lt;- data.table::fread(\"/home/david/Documents/CytometryInR/data/QCBeadGates.csv\")\n\nMyGatingTemplate &lt;- gatingTemplate(MyGates)\ngt_gating(MyGatingTemplate, MyGatingSet)\n\n#pData(MyGatingSet)\n#plot(MyGatingSet)\n#x &lt;- MyGatingSet[1]\n#subset &lt;- \"beads\"\n#sample.name &lt;- \"TUBENAME\"\n\nRCVfromFCS &lt;- function(x, subset, sample.name){\n     Name &lt;- keyword(x, sample.name)\n     Internal &lt;- gs_pop_get_data(x, subset)\n     Internal &lt;- exprs(Internal[[1]])\n     Internal &lt;- data.frame(Internal, check.names=FALSE)\n     These &lt;- colnames(Internal)\n     TheRCVs &lt;- map(.x=These, .f=InternalRCV, data=Internal) |&gt;\n           bind_cols()\n     TheRCVs &lt;- TheRCVs |&gt; mutate(Sample=Name) |&gt;\n           relocate(Sample, .before=1)\n     return(TheRCVs)\n}\n\n#data &lt;- Internal\n#x &lt;- These[1]\n\nInternalRCV &lt;- function(x, data){\n     Name &lt;- x\n     TheCol &lt;- data |&gt; select(x)\n     TheCol &lt;- TheCol[!is.na(TheCol)]\n     if(length(TheCol) == 0) return(NULL)\n     RCV &lt;- mad(TheCol) / median(TheCol)\n     RCV &lt;- data.frame(RCV)\n     colnames(RCV) &lt;- Name\n     return(RCV)\n}\n\nRCVs &lt;- map(.x=MyGatingSet, .f=RCVfromFCS, subset=\"beads\", sample.name=\"TUBENAME\") |&gt; bind_rows()\n\nLastDetectors &lt;- RCVs |&gt; select(Sample, \"UV16-A\", \"V16-A\", \"B14-A\", \"YG10-A\", \"R8-A\")\nLastDetectors[,2:6] &lt;- LastDetectors[,2:6]*100 \nLastDetectors[,2:6] &lt;- round(LastDetectors[,2:6], 2)\n\nFileLocation &lt;- system.file(\"extdata\", package = \"Luciernaga\")\npattern = \"AutofluorescentOverlaps.csv\"\nAFOverlap &lt;- list.files(path=FileLocation, pattern=pattern,\n                        full.names = TRUE)\nAFOverlap_CSV &lt;- read.csv(AFOverlap, check.names = FALSE)\n#AFOverlap_CSV\n\n#pData(SpectraData)\nSpectraData &lt;- gs_pop_get_data(MyGatingSet, \"beads\")\nSpectraData &lt;- flowWorkspace::cytoset_to_flowSet(SpectraData)\n\noutpath &lt;- file.path(\"media\", \"david\", \"Desktop\")\n\nUnstainedSignature &lt;- map(.x=MyGatingSet, .f=Luciernaga_QC,\n                                    subsets=\"beads\", \n                                    removestrings=\".fcs\",\n                                    sample.name=\"TUBENAME\",\n                                    unmixingcontroltype = \"cells\",\n                                    Unstained = TRUE, \n                                    ratiopopcutoff = 0.001,\n                                    Verbose = TRUE,\n                                    AFOverlap = AFOverlap,\n                                    stats = \"median\",\n                                    ExportType = \"data\",\n                                    SignatureReturnNow = FALSE,\n                                    outpath = outpath,\n                                    Increments=0.1, experiment=\"Lot2006\",\n                                    condition.name=\"$DATE\", SecondaryPeaks=8) |&gt;\n                                    bind_rows()\n\n#UnstainedSignature$Condition &lt;- lubridate::dmy(UnstainedSignature$Condition)\n#str(UnstainedSignature)\n#table(UnstainedSignature$Cluster)"
  },
  {
    "objectID": "BleachVsLot2006Beads.html#last-detector-rcv-change",
    "href": "BleachVsLot2006Beads.html#last-detector-rcv-change",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Last Detector %RCV Change",
    "text": "Last Detector %RCV Change\nFollowing bleach exposure, the %RCV changed for each of the last detectors. The timepoint with extra five minutes of DI water flushing decreased a little but remained elevated.\n\n\n\n\n\n\n\n\nSample\nUV16-A\nV16-A\nB14-A\nYG10-A\nR8-A\n\n\n\n\n28 After Evening\n2.89\n2.44\n2.55\n1.80\n1.71\n\n\n28 Evening Post Bleach SIP\n8.64\n10.02\n8.70\n9.22\n10.28\n\n\n28 Evening Post DI Water\n7.75\n9.39\n8.22\n8.31\n9.67"
  },
  {
    "objectID": "BleachVsLot2006Beads.html#mfi",
    "href": "BleachVsLot2006Beads.html#mfi",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "MFI",
    "text": "MFI\n\nBefore\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[1]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs (title=\"Before Bleach\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nAfter\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[2]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs (title=\"After Bleach\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\nFollowing bleach exposure, spectra-style plots show that for the last detectors of each laser, cells of different brightness are present, causing a smeared appearance for the laser."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#normalized-signature",
    "href": "BleachVsLot2006Beads.html#normalized-signature",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Normalized Signature",
    "text": "Normalized Signature\n\nBefore\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"28 After Evening\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\nBeforeLine &lt;- LinePlot\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nAfter\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"28 Evening Post Bleach SIP\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\nAfter_Line &lt;- LinePlot\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\nWhen looking at the normalized signatures of the Lot 2006 QC beads, the beads that have been exposed to bleach have significantly lower proportions relative to the primary peak for the last detector of each laser, with the peak on R8 appearing clipped compared to it’s level at baseline."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#what-changed",
    "href": "BleachVsLot2006Beads.html#what-changed",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "What changed:",
    "text": "What changed:\nTo better understand what might be happening, we subtracted the MFI values from the after bleach exposure beads from the MFI values from the before bleach exposure beads. We normalized the difference to derrive a fluorescent signature.\n\n\nCode\nBefore &lt;- BeforeLine[1,] |&gt; select(-Sample, -Cluster)\nAfter &lt;- After_Line |&gt; select(-Sample, -Cluster)\n\nChange &lt;- Before-After\n\nChange &lt;- Change |&gt; mutate(Cluster=\"TheChange\") |&gt; relocate(Cluster, .before=1)\n\nTheLines &lt;- QC_ViewSignature(x=\"TheChange\", columnname = \"Cluster\",\n data=Change, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\nComparing against other known fluorophores, the signature appears very similar to APC-Fire810.\n\n\nNormalizing Data for Signature Comparison\n\n\n\n\n\n\n\n\nFluorophore\nID_TheChange\n\n\n\n\nAPC-Astral 813\n0.94\n\n\nAPC-Fire 810\n0.94\n\n\ncFluor R840\n0.94\n\n\nSBR815\n0.91\n\n\nDyLight 800\n0.87\n\n\niFluor 790\n0.86\n\n\nAlexa Fluor 790\n0.82\n\n\nCF770\n0.79\n\n\nLive-or-Dye 787-808\n0.79\n\n\niFluor A7\n0.72\n\n\n\n\n\n\n\n\n\n\n\n\n\nOur current speculation is that bleach is releasing the APC-Fire810-like fluorophore from being bound to the bead. Since individual beads may still have some APC-Fire810 bound, this is what is causing the smear appearance on the MFI plots, and in turn contributing to the increased RCV."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#methods-1",
    "href": "BleachVsLot2006Beads.html#methods-1",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Methods",
    "text": "Methods\n\nBead Acquisition\nOn three of our Cytek Auroras (3, 4, and 5-lasers) we acquired 5000 freshly-prepared QC beads as .fcs files before and after running SpectroFlo Daily QC at different timepoints following the monthly long-clean. The sequential timepoints were as follows:\n\n1) Following the Long Clean (Bleach then Water)\n2) After a Second Long “Clean” (Water, then Water)\n3) After additionally running DI water on the SIP on high for 30 minutes\n4) After running DI water on the sip on high for an additional 30 minutes (1 hour mark).\n\n\n\nBead Analysis\nThe before and after .fcs files for each instruments time-points were gated for singlet beads, with the MFI of the gated events (and Gains/Voltages recorded for each .fcs file) extracted in R. The normalized signature of individual beads was characterized, beads with similar normalized signatures were grouped together, and the frequency of each cluster enumerated. The normalized signature for each major cluster was visualized in a line-plot."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#results",
    "href": "BleachVsLot2006Beads.html#results",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Results",
    "text": "Results\n\n\nCode\nlibrary(flowCore)\nlibrary(flowWorkspace)\nlibrary(openCyto)\nlibrary(Luciernaga)\n#library(Biobase)\nlibrary(flowSpectrum)\nlibrary(dplyr)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(ggplot2)\n\npath &lt;- file.path(\"/media\", \"david\", \"David\", \"QC_Check\", \"QC_2025-03\")\nfiles &lt;- list.files(path, pattern=\".fcs\", full.names=TRUE, recursive=TRUE)\nfiles &lt;- files[str_detect(files, \"12 \")]\n\nMyCytoSet &lt;- load_cytoset_from_fcs(files, transformation=FALSE, truncate_max_range = FALSE)\nMyGatingSet &lt;- GatingSet(MyCytoSet)\nMyGates &lt;- data.table::fread(\"/home/david/Documents/CytometryInR/data/QCBeadGates.csv\")\n\nMyGatingTemplate &lt;- gatingTemplate(MyGates)\ngt_gating(MyGatingTemplate, MyGatingSet)\n#plot(MyGatingSet)\n\nremovestrings &lt;-  c(\"(Cells)\", \".fcs\", \" \")\nStorageLocation &lt;- file.path(\"/home\", \"david\", \"Desktop\")\n\nIndividualPlot &lt;- Utility_GatingPlots(x=MyGatingSet[[2]], sample.name = \"GUID\",\n                                      removestrings = removestrings, gtFile = MyGates,\n                                      DesiredGates = NULL, outpath = StorageLocation, returnType=\"patchwork\")\n\n#IndividualPlot[[1]]\n#pData(MyGatingSet)\n\nFileLocation &lt;- system.file(\"extdata\", package = \"Luciernaga\")\npattern = \"AutofluorescentOverlaps.csv\"\nAFOverlap &lt;- list.files(path=FileLocation, pattern=pattern,\n                        full.names = TRUE)\nAFOverlap_CSV &lt;- read.csv(AFOverlap, check.names = FALSE)\n#AFOverlap_CSV\n\n#pData(SpectraData)\nSpectraData &lt;- gs_pop_get_data(MyGatingSet, \"beads\")\nSpectraData &lt;- flowWorkspace::cytoset_to_flowSet(SpectraData)\n\noutpath &lt;- file.path(\"media\", \"david\", \"Desktop\")\n\nUnstainedSignature &lt;- map(.x=MyGatingSet, .f=Luciernaga_QC,\n                                    subsets=\"beads\", \n                                    removestrings=\".fcs\",\n                                    sample.name=\"TUBENAME\",\n                                    unmixingcontroltype = \"cells\",\n                                    Unstained = TRUE, \n                                    ratiopopcutoff = 0.001,\n                                    Verbose = TRUE,\n                                    AFOverlap = AFOverlap,\n                                    stats = \"median\",\n                                    ExportType = \"data\",\n                                    SignatureReturnNow = FALSE,\n                                    outpath = outpath,\n                                    Increments=0.1, experiment=\"Lot2006\",\n                                    condition.name=\"$DATE\", SecondaryPeaks=8) |&gt;\n                                    bind_rows()\n\n#UnstainedSignature$Condition &lt;- lubridate::dmy(UnstainedSignature$Condition)\n#str(UnstainedSignature)\n#table(UnstainedSignature$Cluster)\n\n\n\nBefore Long Clean\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[1]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs (title=\"Before Long Clean\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"12 After Evening0\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nCode\nTheGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"plot\")\n\nUnnamed &lt;- TheGroupPlot + theme(axis.text.x = element_blank())\n\nUnnamed\n\n\n\n\n\n\n\n\n\nObservations: Before bleach exposure, the YG3 detector has the brightest MFI on the beads. Individual beads share similar signatures. Additionally, on the spectrum style plots, there is limited smearing for the last detectors of each laser.\n\n\nAfter Long Clean (Bleach, then Water)\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[2]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs(title=\"1st Long Clean [Bleach and Water]\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"12 After Evening1\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nCode\nTheGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"plot\")\n\nUnnamed &lt;- TheGroupPlot + theme(axis.text.x = element_blank())\n\nUnnamed\n\n\n\n\n\n\n\n\n\nObservations: On the spectrum style plots, major smearing is immediately noticeable for the last detectors after bleach exposure. YG3 is no longer the primary detector for the majority of individual beads normalized signatures, with R8 taking over the primary detector spot.\n\n\nAfter 2nd Long Clean (Water, then more Water)\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[3]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs(title=\"2nd Long Clean [Water and Water]\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"12 After Evening2\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nCode\nTheGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"plot\")\n\nUnnamed &lt;- TheGroupPlot + theme(axis.text.x = element_blank())\n\nUnnamed\n\n\n\n\n\n\n\n\n\nObservations: On the spectrum style plots, smearing is still noticeable despite the second long clean with only DI water. On the fresh beads, YG3 is being less affected, retaking it’s role as primary detector for the majority of individual beads normalized signatures, although the proportion of R8 remains elevated compared to the pre-bleach normalized signatures.\n\n\nAfter running DI water for 30 additional minutes\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[4]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs(title=\"Running DI Water - 30 minute mark\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"12 After Evening3\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nCode\nTheGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"plot\")\n\nUnnamed &lt;- TheGroupPlot + theme(axis.text.x = element_blank())\n\nUnnamed\n\n\n\n\n\n\n\n\n\nObservations: On the spectrum style plots, smearing continues to decrease on the fresh beads. YG3 is back to the primary detector status, with the height of the R8 peak approaching baseline.\n\n\nAfter running DI water for another 30 additional minutes\n\n\nCode\nSpectra &lt;- flowSpectrum::spectralplot(SpectraData[[5]], theme=\"aurora\", bins=1000)\nSpectra &lt;- Spectra + scale_y_log10() + labs(title=\"Running DI Water - 1 hour mark\")\nplotly::ggplotly(Spectra)\n\n\n\n\n\n\n\n\nCode\nTimepointSignature &lt;- UnstainedSignature |&gt; filter(Sample %in% \"12 After Evening4\")\n\nGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"data\")\n\nThese &lt;- GroupPlot$Cluster |&gt; unique()\nThese &lt;- These[!str_detect(These, \"Other\")]\n\nLinePlot &lt;- TimepointSignature |&gt; filter(Cluster %in% These) |&gt; group_by(Cluster) |&gt;\n     arrange(desc(Count)) |&gt; slice(1) |&gt; ungroup()\nLinePlot &lt;- LinePlot |&gt; select(-Experiment, -Condition, -Count)\n\ncolnames(LinePlot) &lt;- gsub(\"-A\", \"\", colnames(LinePlot))\n\nLinePlot1 &lt;- LinePlot |&gt; select(-Sample)\n\nTheLines &lt;- QC_ViewSignature(x=These, columnname = \"Cluster\",\n data=LinePlot1, Normalize=TRUE, TheFormat = \"wider\")\n\nplotly::ggplotly(TheLines)\n\n\n\n\n\n\n\n\nCode\nTheGroupPlot &lt;- Luciernaga_GroupHeatmap(reports=TimepointSignature,\n nameColumn = \"Sample\", cutoff=0.05, returntype = \"plot\")\n\nUnnamed &lt;- TheGroupPlot + theme(axis.text.x = element_blank())\n\nUnnamed\n\n\n\n\n\n\n\n\n\nObservations: On the spectrum style plots, smearing is present on a couple of the last detectors. However, normalized bead signatures are back to the pre-bleach status."
  },
  {
    "objectID": "BleachVsLot2006Beads.html#conclusion",
    "href": "BleachVsLot2006Beads.html#conclusion",
    "title": "Bleach vs. SpectroFlo QC Bead Lot 2006",
    "section": "Conclusion",
    "text": "Conclusion\nIn this particular testing, it took two long-clean DI water washes, and nearly an hour running DI water on high to mostly clear the residual bleach on each of the three Cytek Aurora instruments.\nUnlike in the first experiment, this experiment ran Daily QC at each step, which resulted in some bizarre normalized signatures due to Daily QC attempting to place the detector MFI at lot-specified thresholds by increasing the gains. Although the medians were correctly placed by this approach, due to the 10% RCV for those detectors, many of the beads had normalized signatures where R8 was now the brightest (peak) detector.\nIf this was occuring on the beads due to the increase in gain, we expect the issues that users running large spectral panels encountered was likely a result of this distortion as well."
  },
  {
    "objectID": "TaskSchedules.html",
    "href": "TaskSchedules.html",
    "title": "Test",
    "section": "",
    "text": "library(utils)\nlibrary(taskscheduleR)\n\n\nTest\n\n#taskscheduler_delete(\"QC_5L_Afternoon1\")\ntaskscheduler_ls() |&gt; dplyr::filter(stringr::str_detect(TaskName, \"QC\"))\n#taskscheduler_runnow(\"QC_5L_AfternoonB\")\n\n\n\n3L\n\n#taskscheduler_delete(\"RepoPull\")\n\n# Automated QC\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_3L.R\")\n\ntaskscheduler_create(taskname = \"QC_3L_Morning\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"10:30\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Automated QC\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_3L.R\")\n\ntaskscheduler_create(taskname = \"QC_3L_Morning_2\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"22:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Flag Removal\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheFlagScript &lt;- file.path(WorkingDirectory, \"FlagRemoval.R\")\n\ntaskscheduler_create(taskname = \"FlagRemoval\",\n                     rscript=TheFlagScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"13:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Repo Pull\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheRepoPull &lt;- file.path(WorkingDirectory, \"RepoPull.R\")\n\ntaskscheduler_create(taskname = \"RepoPull\",\n                     rscript=TheRepoPull,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"06:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n#source(\"C:/Users/12692/Documents/ILT_Analysis/TestScheduler1.R\")\n#taskscheduler_ls()\n#taskscheduler_delete(\"QC_3L_Morning\")\n\n\n\n4L\n\n#taskscheduler_delete(\"RepoPull\")\n\n# Automated QC\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_4L.R\")\n\ntaskscheduler_create(taskname = \"QC_4L_Morning\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"10:32\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Automated QC\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_4L.R\")\n\ntaskscheduler_create(taskname = \"QC_4L_Morning_2\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"22:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Flag Removal\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheFlagScript &lt;- file.path(WorkingDirectory, \"FlagRemoval.R\")\n\ntaskscheduler_create(taskname = \"FlagRemoval\",\n                     rscript=TheFlagScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"13:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n# Repo Pull\nWorkingDirectory &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nTheRepoPull &lt;- file.path(WorkingDirectory, \"RepoPull.R\")\n\ntaskscheduler_create(taskname = \"RepoPull\",\n                     rscript=TheRepoPull,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"06:00\",\n                     schtasks_extra = '/RU SYSTEM')\n\n#source(\"C:/Users/12692/Documents/ILT_Analysis/TestScheduler1.R\")\n#taskscheduler_ls()\n#taskscheduler_delete(\"QC_4L_Morning\")\n\n\n\n5L\n\nWorkingDirectory &lt;- file.path(\"C:\", \"Users\", \"Aurora\", \"Documents\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_5L.R\")\ntaskscheduler_create(taskname = \"QC_5L_MorningB\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"10:34\"#,\n                     #schtasks_extra = '/RU SYSTEM'\n                     )\n\nWorkingDirectory &lt;- file.path(\"C:\", \"Users\", \"Aurora\", \"Documents\", \"InstrumentQC\")\nTheScript &lt;- file.path(WorkingDirectory, \"TheScript_5L.R\")\ntaskscheduler_create(taskname = \"QC_5L_AfternoonB\",\n                     rscript=TheScript,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"13:34\"#,\n                     #schtasks_extra = '/RU SYSTEM'\n                     )\n\n\n\nCS\n\n# Automated QC\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\")\nRepositoryPath &lt;- file.path(Main, \"Documents\", \"InstrumentQC\", \"TheScript_CS.R\")\ntaskscheduler_create(taskname = \"QC_CS_Morning\",\n                     rscript=RepositoryPath,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"10:36\",\n                     schtasks_extra = '/RU SYSTEM')\n\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\")\nRepositoryPath &lt;- file.path(Main, \"Documents\", \"InstrumentQC\", \"TheScript_CS.R\")\ntaskscheduler_create(taskname = \"QC_CS_Afternoon\",\n                     rscript=RepositoryPath,\n                     schedule=\"DAILY\",\n                     startdate = format(Sys.Date(), \"%m/%d/%Y\"),\n                     starttime = \"13:36\",\n                     schtasks_extra = '/RU SYSTEM')"
  },
  {
    "objectID": "Examples_FlagRemoval.html",
    "href": "Examples_FlagRemoval.html",
    "title": "UMGCC FCSS",
    "section": "",
    "text": "Please save the below as .R files for each individual computer. This FlagRemoval.R file is then called by source(FlagRemoval.R) in the TaskSchedule process to remove any generated Flag.csv files at the end of the day, resetting the automatic processing for the next day.\n\n# 3L\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nAnyFlags &lt;- list.files(Main, pattern=\"Flag.csv\", full.names=TRUE)\n\nif (!length(AnyFlags) == 0){\n  TheCSV &lt;- file.path(Main, \"Flag.csv\")\n  file.remove(TheCSV)\n}\n\n\n# 4L\nMain &lt;- file.path(\"C:\", \"DailyQC\", \"InstrumentQC\")\nAnyFlags &lt;- list.files(Main, pattern=\"Flag.csv\", full.names=TRUE)\n\nif (!length(AnyFlags) == 0){\n  TheCSV &lt;- file.path(Main, \"Flag.csv\")\n  file.remove(TheCSV)\n}\n\n\n# 5L\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora\", \"Documents\", \"InstrumentQC\")\nAnyFlags &lt;- list.files(Main, pattern=\"Flag.csv\", full.names=TRUE)\n\nif (!length(AnyFlags) == 0){\n  TheCSV &lt;- file.path(Main, \"Flag.csv\")\n  file.remove(TheCSV)\n}\n\n\n# CS\nMain &lt;- file.path(\"C:\", \"Users\", \"Aurora CS\", \"Documents\", \"InstrumentQC\")\nAnyFlags &lt;- list.files(Main, pattern=\"Flag.csv\", full.names=TRUE)\n\nif (!length(AnyFlags) == 0){\n  TheCSV &lt;- file.path(Main, \"Flag.csv\")\n  file.remove(TheCSV)\n}"
  }
]